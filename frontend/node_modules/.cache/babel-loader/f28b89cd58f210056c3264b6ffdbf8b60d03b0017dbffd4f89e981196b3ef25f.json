{"ast":null,"code":"var _jsxFileName = \"/Users/usedcvnt/Documents/IDEProjects/VSCProjects/1st/frontend/src/pages/vacations/VacationForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react'; // Убран useCallback и flushSync\nimport { motion, AnimatePresence } from 'framer-motion';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport { toast } from 'react-toastify';\nimport { FaCalendarAlt, FaPlus, FaTrash, FaSave, FaPaperPlane } from 'react-icons/fa';\nimport ru from 'date-fns/locale/ru';\nimport { getVacationLimit, createVacationRequest, submitVacationRequest } from '../../api/vacations'; // Предполагается, что API файл будет создан\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './VacationForm.css';\n\n// Регистрация русской локали для DatePicker\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nregisterLocale('ru', ru);\nconst VacationForm = () => {\n  _s();\n  const [year, setYear] = useState(new Date().getFullYear() + 1);\n  const [periods, setPeriods] = useState([{\n    startDate: null,\n    endDate: null,\n    daysCount: 0\n  }]);\n  const [status, setStatus] = useState('draft'); // 'draft', 'submitted'\n  const [limit, setLimit] = useState(28);\n  const [usedDays, setUsedDays] = useState(0);\n  const [loading, setLoading] = useState(false); // Для загрузки лимита\n  const [submitting, setSubmitting] = useState(false); // Для сохранения/отправки\n  const [errors, setErrors] = useState({});\n  const [requestId, setRequestId] = useState(null); // ID сохраненной заявки\n\n  // Загрузка лимита отпуска при изменении года\n  useEffect(() => {\n    const fetchLimit = async () => {\n      try {\n        setLoading(true);\n        const limitData = await getVacationLimit(year); // Используем реальный API вызов\n        setLimit(limitData.totalDays);\n        setUsedDays(limitData.usedDays);\n      } catch (error) {\n        // Обработка ошибки, если лимит не найден (например, для нового пользователя/года)\n        if (error.message.includes(\"лимит отпуска не найден\")) {\n          toast.info(`Лимит на ${year} год еще не установлен. Используется стандартный лимит (${limit} дней).`);\n          // Оставляем дефолтные значения limit и usedDays\n        } else {\n          toast.error(\"Ошибка при загрузке лимита отпуска\"); // Показываем общую ошибку, если это не ошибка \"лимит не найден\"\n        }\n        // toast.error(\"Ошибка при загрузке лимита отпуска\"); // Убираем дублирующийся вызов\n        console.error(\"Ошибка при загрузке лимита:\", error); // Логируем ошибку для отладки\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLimit();\n  }, [year]);\n\n  // Вычисление общего количества дней\n  const totalDaysRequested = periods.reduce((sum, period) => sum + period.daysCount, 0);\n  const remainingDays = limit - usedDays - totalDaysRequested;\n\n  // Функция для подсчета дней между датами\n  const calculateDays = (startDate, endDate) => {\n    if (!startDate || !endDate || startDate > endDate) return 0; // Добавлена проверка startDate > endDate\n    const diffTime = Math.abs(endDate.getTime() - startDate.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n  };\n\n  // Обработка изменения года\n  const handleYearChange = e => {\n    setYear(parseInt(e.target.value));\n    // Сброс периодов и ошибок при смене года\n    setPeriods([{\n      startDate: null,\n      endDate: null,\n      daysCount: 0\n    }]);\n    setErrors({});\n    setRequestId(null);\n    setStatus('draft');\n  };\n\n  // Обработка изменения дат\n  const handleDateChange = (index, field, date) => {\n    const newPeriods = [...periods];\n    newPeriods[index][field] = date;\n\n    // Автоматический расчет дней, если обе даты выбраны и start <= end\n    if (newPeriods[index].startDate && newPeriods[index].endDate && newPeriods[index].startDate <= newPeriods[index].endDate) {\n      newPeriods[index].daysCount = calculateDays(newPeriods[index].startDate, newPeriods[index].endDate);\n    } else {\n      newPeriods[index].daysCount = 0; // Сброс, если даты некорректны\n    }\n    setPeriods(newPeriods);\n    validateForm(newPeriods); // Валидация при каждом изменении\n  };\n\n  // Добавление нового периода\n  const addPeriod = () => {\n    setPeriods([...periods, {\n      startDate: null,\n      endDate: null,\n      daysCount: 0\n    }]);\n  };\n\n  // Удаление периода\n  const removePeriod = index => {\n    const newPeriods = periods.filter((_, i) => i !== index);\n    setPeriods(newPeriods);\n    validateForm(newPeriods); // Валидация после удаления\n  };\n\n  // Валидация формы (переработанная логика)\n  // Убран useCallback\n  const validateForm = (periodsToValidate = periods) => {\n    // Снова принимаем аргумент или используем состояние\n    // Всегда начинаем с пустого объекта ошибок\n    const currentErrors = {};\n    // const periodsToValidate = periods; // Используем переданный аргумент или состояние\n\n    // 1. Проверка базовой корректности дат и наличия периодов\n    if (periodsToValidate.length === 0) {\n      newErrors.noPeriods = 'Необходимо добавить хотя бы один период отпуска.';\n      // Устанавливаем ошибки и выходим, если периодов нет\n      setErrors(newErrors);\n      return false;\n    }\n    const hasInvalidDates = periodsToValidate.some(period => !period.startDate || !period.endDate || period.startDate > period.endDate);\n    if (hasInvalidDates) {\n      currentErrors.invalidDates = 'Все даты должны быть заполнены корректно (дата начала <= дата окончания).';\n      // Не выходим сразу, чтобы проверить и другие ошибки, если возможно\n    }\n\n    // 2. Проверка общих дней и правила 14 дней (только если базовые даты корректны)\n    if (!hasInvalidDates) {\n      const totalRequested = periodsToValidate.reduce((sum, period) => sum + period.daysCount, 0);\n      if (totalRequested <= 0) {\n        currentErrors.noDays = 'Необходимо запросить хотя бы один день отпуска (проверьте даты).';\n      } else {\n        // totalRequested > 0\n        // Отладка: выводим периоды и рассчитанные дни\n        console.log('Validating 14-day rule. Periods:', JSON.stringify(periodsToValidate.map(p => ({\n          start: p.startDate,\n          end: p.endDate,\n          days: p.daysCount\n        }))));\n\n        // Проверяем правило 14 дней\n        const hasLongPeriod = periodsToValidate.some(period => period.daysCount >= 14);\n        console.log('Has long period (>= 14 days):', hasLongPeriod); // Отладка\n        // Добавляем ошибку только если условие НЕ выполнено\n        if (!hasLongPeriod) {\n          currentErrors.longPeriod = 'Одна из частей отпуска должна быть не менее 14 календарных дней.';\n        }\n        // Проверяем лимит\n        if (totalRequested > limit - usedDays) {\n          currentErrors.limit = `Превышен доступный лимит дней отпуска (${limit - usedDays} дн.).`;\n        }\n      }\n    }\n\n    // Log the errors object *before* setting state\n    console.log(\"Errors object calculated:\", JSON.stringify(currentErrors));\n\n    // Простое обновление состояния\n    setErrors({\n      ...currentErrors\n    });\n\n    // Log *after* setting state (хотя это может не показать обновленное значение немедленно)\n    // console.log(\"Called setErrors with:\", JSON.stringify(currentErrors)); // Можно убрать этот лог\n\n    const isValid = Object.keys(currentErrors).length === 0;\n    console.log(`validateForm returning: ${isValid}`); // Log the return value\n    return isValid; // Проверяем собранный объект\n  };\n\n  // Убран useEffect для валидации\n\n  // Сохранение заявки\n  const handleSave = async e => {\n    e.preventDefault();\n\n    // Вызываем validateForm() непосредственно перед сохранением для актуальной проверки\n    const isFormValid = validateForm(); // Сохраним результат\n    if (!isFormValid) {\n      // Логируем *текущее* состояние errors, которое привело к false\n      console.log(\"Save blocked by validateForm() check. Current errors state:\", JSON.stringify(errors));\n      // Временно убираем toast, чтобы проверить, появляется ли ошибка в UI без него\n      // toast.warn('Пожалуйста, исправьте ошибки в форме перед сохранением.'); \n      return;\n    }\n\n    // Если валидация пройдена, продолжаем\n    console.log(\"Validation passed in handleSave, proceeding.\");\n    try {\n      setSubmitting(true);\n      const vacationRequest = {\n        year,\n        periods: periods.map(period => ({\n          // Форматирование дат перед отправкой (пример)\n          startDate: period.startDate.toISOString().split('T')[0],\n          endDate: period.endDate.toISOString().split('T')[0],\n          daysCount: period.daysCount\n        })),\n        statusId: 1 // Черновик\n      };\n\n      // Используем реальный API вызов\n      // TODO: Определить, нужно ли обновлять или создавать новую заявку, если requestId уже есть\n      let response;\n      if (requestId) {\n        // Логика обновления существующего черновика (если API поддерживает)\n        // response = await updateVacationRequest(requestId, vacationRequest); \n        // Пока просто создаем новую, если сохраняем повторно\n        response = await createVacationRequest(vacationRequest);\n        toast.info('Черновик обновлен (создана новая версия).'); // Уточняющее сообщение\n      } else {\n        response = await createVacationRequest(vacationRequest);\n        toast.success('Заявка успешно сохранена как черновик');\n      }\n      setRequestId(response.id); // Сохраняем ID созданной/обновленной заявки\n      setStatus('draft'); // Убедимся, что статус - черновик\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при сохранении заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Отправка заявки руководителю\n  const handleSubmit = async () => {\n    // Более явная проверка перед отправкой\n    if (!requestId) {\n      toast.warn('Сначала необходимо сохранить заявку как черновик.'); // Изменено на warn\n      return;\n    }\n    // Вызываем validateForm() непосредственно перед отправкой для актуальной проверки\n    if (!validateForm()) {\n      console.log(\"Submit blocked by validateForm() check.\");\n      toast.warn('Пожалуйста, исправьте ошибки в форме перед отправкой');\n      return;\n    }\n\n    // Если валидация пройдена, продолжаем\n    console.log(\"Validation passed in handleSubmit, proceeding.\");\n    try {\n      setSubmitting(true);\n      await submitVacationRequest(requestId); // Используем реальный API вызов\n      toast.success('Заявка успешно отправлена руководителю');\n      setStatus('submitted'); // Меняем статус в UI\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при отправке заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"vacation-form-container\",\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430 \\u043D\\u0430 \", year, \" \\u0433\\u043E\\u0434\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"year-selector\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"year\",\n        children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0434:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"year\",\n        value: year,\n        onChange: handleYearChange,\n        disabled: loading || submitting,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: new Date().getFullYear(),\n          children: \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0433\\u043E\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: new Date().getFullYear() + 1,\n          children: \"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0438\\u0439 \\u0433\\u043E\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"loading-indicator\",\n        children: \" \\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043B\\u0438\\u043C\\u0438\\u0442\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"vacation-limits card\" // Добавлен класс card\n      ,\n      initial: {\n        x: -20,\n        opacity: 0\n      },\n      animate: {\n        x: 0,\n        opacity: 1\n      },\n      transition: {\n        delay: 0.2\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u043E \\u0434\\u043D\\u0435\\u0439:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: limit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0418\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u043D\\u043E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: usedDays\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0417\\u0430\\u043F\\u0440\\u043E\\u0448\\u0435\\u043D\\u043E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: totalDaysRequested\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u041E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `limit-value ${remainingDays < 0 ? 'error' : ''}`,\n          children: remainingDays\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), errors.invalidDates && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.invalidDates\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 31\n    }, this), errors.noPeriods && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.noPeriods\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 28\n    }, this), errors.noDays && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.noDays\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 25\n    }, this), errors.longPeriod ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.longPeriod\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 28\n    }, this) : null, errors.limit && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.limit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSave,\n      children: [\" \", periods.map((period, index) => /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"vacation-period card\" // Добавлен класс card\n        ,\n        initial: {\n          opacity: 0,\n          y: 20\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        exit: {\n          opacity: 0,\n          y: -20\n        },\n        transition: {\n          delay: index * 0.1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\u0427\\u0430\\u0441\\u0442\\u044C \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430 \", index + 1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"date-inputs\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: `start-date-${index}`,\n              children: \"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-picker-container\",\n              children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                id: `start-date-${index}`,\n                selected: period.startDate,\n                onChange: date => handleDateChange(index, 'startDate', date),\n                selectsStart: true,\n                startDate: period.startDate,\n                endDate: period.endDate,\n                minDate: new Date(year, 0, 1),\n                maxDate: new Date(year, 11, 31),\n                dateFormat: \"dd.MM.yyyy\",\n                locale: \"ru\",\n                placeholderText: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",\n                className: \"date-input\",\n                disabled: submitting || status === 'submitted'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                className: \"date-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: `end-date-${index}`,\n              children: \"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-picker-container\",\n              children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                id: `end-date-${index}`,\n                selected: period.endDate,\n                onChange: date => handleDateChange(index, 'endDate', date),\n                selectsEnd: true,\n                startDate: period.startDate,\n                endDate: period.endDate,\n                minDate: period.startDate || new Date(year, 0, 1),\n                maxDate: new Date(year, 11, 31),\n                dateFormat: \"dd.MM.yyyy\",\n                locale: \"ru\",\n                placeholderText: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",\n                className: \"date-input\",\n                disabled: submitting || status === 'submitted' || !period.startDate // Блокируем, пока не выбрана дата начала\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                className: \"date-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"days-count\",\n          children: [\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0434\\u043D\\u0435\\u0439: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: period.daysCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 15\n        }, this), periods.length > 1 && /*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"button\",\n          className: \"remove-period btn btn-danger\" // Добавлены классы btn\n          ,\n          onClick: () => removePeriod(index),\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || status === 'submitted',\n          children: [/*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 19\n          }, this), \" \\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0447\\u0430\\u0441\\u0442\\u044C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 13\n      }, this)), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"button\",\n          className: \"add-period btn\" // Добавлен класс btn\n          ,\n          onClick: addPeriod,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || status === 'submitted',\n          children: [/*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0447\\u0430\\u0441\\u0442\\u044C \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"submit\",\n          className: \"save-request btn btn-primary\" // Добавлены классы btn\n          ,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || status === 'submitted' || (() => {\n            // IIFE для логирования\n            const hasErrors = Object.keys(errors).length > 0;\n            console.log(`Save button disabled check: errors=${JSON.stringify(errors)}, hasErrors=${hasErrors}`);\n            return hasErrors;\n          })() // Блокируем при ошибках\n          ,\n          children: [/*#__PURE__*/_jsxDEV(FaSave, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), \" \", requestId ? 'Обновить черновик' : 'Сохранить черновик']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"button\",\n          className: \"submit-request btn btn-success\" // Добавлены классы btn\n          ,\n          onClick: handleSubmit,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || !requestId || status === 'submitted' || Object.keys(errors).length > 0 // Блокируем при ошибках\n          ,\n          children: [/*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), \" \\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0443\\u043A\\u043E\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), status === 'submitted' && /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"success-message\" // Нужен CSS для этого класса\n      ,\n      initial: {\n        opacity: 0,\n        y: 10\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      children: \"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0430 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0430!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 5\n  }, this);\n};\n_s(VacationForm, \"Wq7iAUzeIFGQCPxjxacLuz0NKso=\");\n_c = VacationForm;\nexport default VacationForm;\nvar _c;\n$RefreshReg$(_c, \"VacationForm\");","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","DatePicker","registerLocale","toast","FaCalendarAlt","FaPlus","FaTrash","FaSave","FaPaperPlane","ru","getVacationLimit","createVacationRequest","submitVacationRequest","jsxDEV","_jsxDEV","VacationForm","_s","year","setYear","Date","getFullYear","periods","setPeriods","startDate","endDate","daysCount","status","setStatus","limit","setLimit","usedDays","setUsedDays","loading","setLoading","submitting","setSubmitting","errors","setErrors","requestId","setRequestId","fetchLimit","limitData","totalDays","error","message","includes","info","console","totalDaysRequested","reduce","sum","period","remainingDays","calculateDays","diffTime","Math","abs","getTime","ceil","handleYearChange","e","parseInt","target","value","handleDateChange","index","field","date","newPeriods","validateForm","addPeriod","removePeriod","filter","_","i","periodsToValidate","currentErrors","length","newErrors","noPeriods","hasInvalidDates","some","invalidDates","totalRequested","noDays","log","JSON","stringify","map","p","start","end","days","hasLongPeriod","longPeriod","isValid","Object","keys","handleSave","preventDefault","isFormValid","vacationRequest","toISOString","split","statusId","response","success","id","handleSubmit","warn","div","className","initial","opacity","animate","transition","duration","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","onChange","disabled","x","delay","onSubmit","y","exit","selected","selectsStart","minDate","maxDate","dateFormat","locale","placeholderText","selectsEnd","button","type","onClick","whileHover","scale","whileTap","hasErrors","_c","$RefreshReg$"],"sources":["/Users/usedcvnt/Documents/IDEProjects/VSCProjects/1st/frontend/src/pages/vacations/VacationForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'; // Убран useCallback и flushSync\nimport { motion, AnimatePresence } from 'framer-motion';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport { toast } from 'react-toastify';\nimport { FaCalendarAlt, FaPlus, FaTrash, FaSave, FaPaperPlane } from 'react-icons/fa';\nimport ru from 'date-fns/locale/ru';\nimport { getVacationLimit, createVacationRequest, submitVacationRequest } from '../../api/vacations'; // Предполагается, что API файл будет создан\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './VacationForm.css';\n\n// Регистрация русской локали для DatePicker\nregisterLocale('ru', ru);\n\nconst VacationForm = () => {\n  const [year, setYear] = useState(new Date().getFullYear() + 1);\n  const [periods, setPeriods] = useState([{ startDate: null, endDate: null, daysCount: 0 }]);\n  const [status, setStatus] = useState('draft'); // 'draft', 'submitted'\n  const [limit, setLimit] = useState(28);\n  const [usedDays, setUsedDays] = useState(0);\n  const [loading, setLoading] = useState(false); // Для загрузки лимита\n  const [submitting, setSubmitting] = useState(false); // Для сохранения/отправки\n  const [errors, setErrors] = useState({});\n  const [requestId, setRequestId] = useState(null); // ID сохраненной заявки\n\n\n  // Загрузка лимита отпуска при изменении года\n  useEffect(() => {\n    const fetchLimit = async () => {\n      try {\n        setLoading(true);\n        const limitData = await getVacationLimit(year); // Используем реальный API вызов\n        setLimit(limitData.totalDays);\n        setUsedDays(limitData.usedDays);\n      } catch (error) {\n        // Обработка ошибки, если лимит не найден (например, для нового пользователя/года)\n        if (error.message.includes(\"лимит отпуска не найден\")) {\n            toast.info(`Лимит на ${year} год еще не установлен. Используется стандартный лимит (${limit} дней).`);\n            // Оставляем дефолтные значения limit и usedDays\n        } else {\n            toast.error(\"Ошибка при загрузке лимита отпуска\"); // Показываем общую ошибку, если это не ошибка \"лимит не найден\"\n        }\n        // toast.error(\"Ошибка при загрузке лимита отпуска\"); // Убираем дублирующийся вызов\n        console.error(\"Ошибка при загрузке лимита:\", error); // Логируем ошибку для отладки\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchLimit();\n  }, [year]);\n\n  // Вычисление общего количества дней\n  const totalDaysRequested = periods.reduce((sum, period) => sum + period.daysCount, 0);\n  const remainingDays = limit - usedDays - totalDaysRequested;\n\n  // Функция для подсчета дней между датами\n  const calculateDays = (startDate, endDate) => {\n    if (!startDate || !endDate || startDate > endDate) return 0; // Добавлена проверка startDate > endDate\n    const diffTime = Math.abs(endDate.getTime() - startDate.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n  };\n\n  // Обработка изменения года\n  const handleYearChange = (e) => {\n    setYear(parseInt(e.target.value));\n    // Сброс периодов и ошибок при смене года\n    setPeriods([{ startDate: null, endDate: null, daysCount: 0 }]);\n    setErrors({});\n    setRequestId(null);\n    setStatus('draft');\n  };\n\n  // Обработка изменения дат\n  const handleDateChange = (index, field, date) => {\n    const newPeriods = [...periods];\n    newPeriods[index][field] = date;\n    \n    // Автоматический расчет дней, если обе даты выбраны и start <= end\n    if (newPeriods[index].startDate && newPeriods[index].endDate && newPeriods[index].startDate <= newPeriods[index].endDate) {\n      newPeriods[index].daysCount = calculateDays(\n        newPeriods[index].startDate,\n        newPeriods[index].endDate\n      );\n    } else {\n      newPeriods[index].daysCount = 0; // Сброс, если даты некорректны\n    }\n    \n    setPeriods(newPeriods);\n    validateForm(newPeriods); // Валидация при каждом изменении\n  };\n\n  // Добавление нового периода\n  const addPeriod = () => {\n    setPeriods([...periods, { startDate: null, endDate: null, daysCount: 0 }]);\n  };\n\n  // Удаление периода\n  const removePeriod = (index) => {\n    const newPeriods = periods.filter((_, i) => i !== index);\n    setPeriods(newPeriods);\n    validateForm(newPeriods); // Валидация после удаления\n  };\n\n  // Валидация формы (переработанная логика)\n  // Убран useCallback\n  const validateForm = (periodsToValidate = periods) => { // Снова принимаем аргумент или используем состояние\n    // Всегда начинаем с пустого объекта ошибок\n    const currentErrors = {}; \n    // const periodsToValidate = periods; // Используем переданный аргумент или состояние\n\n    // 1. Проверка базовой корректности дат и наличия периодов\n    if (periodsToValidate.length === 0) {\n      newErrors.noPeriods = 'Необходимо добавить хотя бы один период отпуска.';\n      // Устанавливаем ошибки и выходим, если периодов нет\n      setErrors(newErrors); \n      return false; \n    }\n\n    const hasInvalidDates = periodsToValidate.some(\n      period => !period.startDate || !period.endDate || period.startDate > period.endDate\n    );\n    if (hasInvalidDates) {\n      currentErrors.invalidDates = 'Все даты должны быть заполнены корректно (дата начала <= дата окончания).';\n      // Не выходим сразу, чтобы проверить и другие ошибки, если возможно\n    }\n\n    // 2. Проверка общих дней и правила 14 дней (только если базовые даты корректны)\n    if (!hasInvalidDates) {\n      const totalRequested = periodsToValidate.reduce((sum, period) => sum + period.daysCount, 0);\n      \n      if (totalRequested <= 0) {\n           currentErrors.noDays = 'Необходимо запросить хотя бы один день отпуска (проверьте даты).';\n      } else { // totalRequested > 0\n          // Отладка: выводим периоды и рассчитанные дни\n          console.log('Validating 14-day rule. Periods:', JSON.stringify(periodsToValidate.map(p => ({ start: p.startDate, end: p.endDate, days: p.daysCount }))));\n          \n          // Проверяем правило 14 дней\n          const hasLongPeriod = periodsToValidate.some(period => period.daysCount >= 14);\n          console.log('Has long period (>= 14 days):', hasLongPeriod); // Отладка\n          // Добавляем ошибку только если условие НЕ выполнено\n          if (!hasLongPeriod) { \n              currentErrors.longPeriod = 'Одна из частей отпуска должна быть не менее 14 календарных дней.';\n          }\n          // Проверяем лимит\n          if (totalRequested > (limit - usedDays)) {\n              currentErrors.limit = `Превышен доступный лимит дней отпуска (${limit - usedDays} дн.).`;\n          }\n      }\n    }\n    \n    // Log the errors object *before* setting state\n    console.log(\"Errors object calculated:\", JSON.stringify(currentErrors));\n    \n    // Простое обновление состояния\n    setErrors({ ...currentErrors }); \n\n    // Log *after* setting state (хотя это может не показать обновленное значение немедленно)\n    // console.log(\"Called setErrors with:\", JSON.stringify(currentErrors)); // Можно убрать этот лог\n    \n    const isValid = Object.keys(currentErrors).length === 0;\n    console.log(`validateForm returning: ${isValid}`); // Log the return value\n    return isValid; // Проверяем собранный объект\n  };\n  \n  // Убран useEffect для валидации\n\n  // Сохранение заявки\n  const handleSave = async (e) => {\n    e.preventDefault();\n    \n    // Вызываем validateForm() непосредственно перед сохранением для актуальной проверки\n    const isFormValid = validateForm(); // Сохраним результат\n    if (!isFormValid) { \n        // Логируем *текущее* состояние errors, которое привело к false\n        console.log(\"Save blocked by validateForm() check. Current errors state:\", JSON.stringify(errors)); \n        // Временно убираем toast, чтобы проверить, появляется ли ошибка в UI без него\n        // toast.warn('Пожалуйста, исправьте ошибки в форме перед сохранением.'); \n        return;\n    }\n    \n    // Если валидация пройдена, продолжаем\n    console.log(\"Validation passed in handleSave, proceeding.\");\n    try {\n      setSubmitting(true);\n      \n      const vacationRequest = {\n        year,\n        periods: periods.map(period => ({\n          // Форматирование дат перед отправкой (пример)\n          startDate: period.startDate.toISOString().split('T')[0], \n          endDate: period.endDate.toISOString().split('T')[0],\n          daysCount: period.daysCount\n        })),\n        statusId: 1 // Черновик\n      };\n      \n      // Используем реальный API вызов\n      // TODO: Определить, нужно ли обновлять или создавать новую заявку, если requestId уже есть\n      let response;\n      if (requestId) {\n         // Логика обновления существующего черновика (если API поддерживает)\n         // response = await updateVacationRequest(requestId, vacationRequest); \n         // Пока просто создаем новую, если сохраняем повторно\n         response = await createVacationRequest(vacationRequest); \n         toast.info('Черновик обновлен (создана новая версия).'); // Уточняющее сообщение\n      } else {\n         response = await createVacationRequest(vacationRequest);\n         toast.success('Заявка успешно сохранена как черновик');\n      }\n      \n      setRequestId(response.id); // Сохраняем ID созданной/обновленной заявки\n      setStatus('draft'); // Убедимся, что статус - черновик\n      \n    } catch (error) {\n      toast.error(error.message || 'Ошибка при сохранении заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Отправка заявки руководителю\n  const handleSubmit = async () => {\n    // Более явная проверка перед отправкой\n    if (!requestId) {\n      toast.warn('Сначала необходимо сохранить заявку как черновик.'); // Изменено на warn\n      return;\n    }\n    // Вызываем validateForm() непосредственно перед отправкой для актуальной проверки\n     if (!validateForm()) { \n        console.log(\"Submit blocked by validateForm() check.\");\n        toast.warn('Пожалуйста, исправьте ошибки в форме перед отправкой');\n        return;\n    }\n    \n    // Если валидация пройдена, продолжаем\n    console.log(\"Validation passed in handleSubmit, proceeding.\");\n    try {\n      setSubmitting(true);\n      await submitVacationRequest(requestId); // Используем реальный API вызов\n      toast.success('Заявка успешно отправлена руководителю');\n      setStatus('submitted'); // Меняем статус в UI\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при отправке заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <motion.div\n      className=\"vacation-form-container\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.5 }}\n    >\n      <h2>Оформление отпуска на {year} год</h2>\n      \n      <div className=\"year-selector\">\n        <label htmlFor=\"year\">Выберите год:</label>\n        <select id=\"year\" value={year} onChange={handleYearChange} disabled={loading || submitting}>\n          <option value={new Date().getFullYear()}>Текущий год</option>\n          <option value={new Date().getFullYear() + 1}>Следующий год</option>\n        </select>\n        {loading && <span className=\"loading-indicator\"> Загрузка лимита...</span>}\n      </div>\n      \n      <motion.div \n        className=\"vacation-limits card\" // Добавлен класс card\n        initial={{ x: -20, opacity: 0 }}\n        animate={{ x: 0, opacity: 1 }}\n        transition={{ delay: 0.2 }}\n      >\n        <div className=\"limit-item\">\n          <span>Доступно дней:</span>\n          <span className=\"limit-value\">{limit}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Использовано:</span>\n          <span className=\"limit-value\">{usedDays}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Запрошено:</span>\n          <span className=\"limit-value\">{totalDaysRequested}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Осталось:</span>\n          <span className={`limit-value ${remainingDays < 0 ? 'error' : ''}`}>\n            {remainingDays}\n          </span>\n        </div>\n      </motion.div>\n      \n      {/* Отображение ошибок (изменено на явные проверки) */}\n      {errors.invalidDates && <div className=\"error-message\">{errors.invalidDates}</div>}\n      {errors.noPeriods && <div className=\"error-message\">{errors.noPeriods}</div>}\n      {errors.noDays && <div className=\"error-message\">{errors.noDays}</div>}\n      {/* Упрощенное отображение ошибки без анимации */}\n      {/* Убран console.log из рендера */}\n      {errors.longPeriod ? <div className=\"error-message\">{errors.longPeriod}</div> : null} \n      {errors.limit && <div className=\"error-message\">{errors.limit}</div>}\n      \n      <form onSubmit={handleSave}>\n        {/* <AnimatePresence> */} {/* Временно убираем AnimatePresence */}\n          {periods.map((period, index) => (\n            <motion.div \n              key={index}\n              className=\"vacation-period card\" // Добавлен класс card\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <h3>Часть отпуска {index + 1}</h3>\n              \n              <div className=\"date-inputs\">\n                <div className=\"date-field\">\n                  <label htmlFor={`start-date-${index}`}>Дата начала</label>\n                  <div className=\"date-picker-container\">\n                    <DatePicker\n                      id={`start-date-${index}`}\n                      selected={period.startDate}\n                      onChange={(date) => handleDateChange(index, 'startDate', date)}\n                      selectsStart\n                      startDate={period.startDate}\n                      endDate={period.endDate}\n                      minDate={new Date(year, 0, 1)}\n                      maxDate={new Date(year, 11, 31)}\n                      dateFormat=\"dd.MM.yyyy\"\n                      locale=\"ru\"\n                      placeholderText=\"Выберите дату\"\n                      className=\"date-input\"\n                      disabled={submitting || status === 'submitted'}\n                    />\n                    <FaCalendarAlt className=\"date-icon\" />\n                  </div>\n                </div>\n                \n                <div className=\"date-field\">\n                  <label htmlFor={`end-date-${index}`}>Дата окончания</label>\n                  <div className=\"date-picker-container\">\n                    <DatePicker\n                      id={`end-date-${index}`}\n                      selected={period.endDate}\n                      onChange={(date) => handleDateChange(index, 'endDate', date)}\n                      selectsEnd\n                      startDate={period.startDate}\n                      endDate={period.endDate}\n                      minDate={period.startDate || new Date(year, 0, 1)}\n                      maxDate={new Date(year, 11, 31)}\n                      dateFormat=\"dd.MM.yyyy\"\n                      locale=\"ru\"\n                      placeholderText=\"Выберите дату\"\n                      className=\"date-input\"\n                      disabled={submitting || status === 'submitted' || !period.startDate} // Блокируем, пока не выбрана дата начала\n                    />\n                    <FaCalendarAlt className=\"date-icon\" />\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"days-count\">\n                Количество дней: <strong>{period.daysCount}</strong>\n              </div>\n              \n              {periods.length > 1 && (\n                <motion.button\n                  type=\"button\"\n                  className=\"remove-period btn btn-danger\" // Добавлены классы btn\n                  onClick={() => removePeriod(index)}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  disabled={submitting || status === 'submitted'}\n                >\n                  <FaTrash /> Удалить часть\n                </motion.button>\n              )}\n            </motion.div>\n          ))}\n        {/* </AnimatePresence> */} {/* Временно убираем AnimatePresence */}\n        \n        <div className=\"form-actions\">\n          <motion.button\n            type=\"button\"\n            className=\"add-period btn\" // Добавлен класс btn\n            onClick={addPeriod}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={submitting || status === 'submitted'}\n          >\n            <FaPlus /> Добавить часть отпуска\n          </motion.button>\n          \n          <motion.button\n            type=\"submit\"\n            className=\"save-request btn btn-primary\" // Добавлены классы btn\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={\n              submitting || \n              status === 'submitted' || \n              (() => { // IIFE для логирования\n                const hasErrors = Object.keys(errors).length > 0;\n                console.log(`Save button disabled check: errors=${JSON.stringify(errors)}, hasErrors=${hasErrors}`);\n                return hasErrors;\n              })()\n            } // Блокируем при ошибках\n          >\n            <FaSave /> {requestId ? 'Обновить черновик' : 'Сохранить черновик'}\n          </motion.button>\n          \n          <motion.button\n            type=\"button\"\n            className=\"submit-request btn btn-success\" // Добавлены классы btn\n            onClick={handleSubmit}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={submitting || !requestId || status === 'submitted' || Object.keys(errors).length > 0} // Блокируем при ошибках\n          >\n            <FaPaperPlane /> Отправить руководителю\n          </motion.button>\n        </div>\n      </form>\n      \n      {status === 'submitted' && (\n          <motion.div \n            className=\"success-message\" // Нужен CSS для этого класса\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n          >\n            Заявка успешно отправлена!\n          </motion.div>\n      )}\n    </motion.div>\n  );\n};\n\nexport default VacationForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}