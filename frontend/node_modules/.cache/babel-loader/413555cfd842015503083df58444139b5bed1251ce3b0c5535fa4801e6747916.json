{"ast":null,"code":"var _jsxFileName = \"/Users/usedcvnt/Documents/IDEProjects/VSCProjects/1st/frontend/src/pages/vacations/VacationForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react'; // Добавлен useCallback\nimport { motion, AnimatePresence } from 'framer-motion';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport { toast } from 'react-toastify';\nimport { FaCalendarAlt, FaPlus, FaTrash, FaSave, FaPaperPlane } from 'react-icons/fa';\nimport ru from 'date-fns/locale/ru';\nimport { getVacationLimit, createVacationRequest, submitVacationRequest } from '../../api/vacations'; // Предполагается, что API файл будет создан\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './VacationForm.css';\n\n// Регистрация русской локали для DatePicker\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nregisterLocale('ru', ru);\nconst VacationForm = () => {\n  _s();\n  const [year, setYear] = useState(new Date().getFullYear() + 1);\n  const [periods, setPeriods] = useState([{\n    startDate: null,\n    endDate: null,\n    daysCount: 0\n  }]);\n  const [status, setStatus] = useState('draft'); // 'draft', 'submitted'\n  const [limit, setLimit] = useState(28);\n  const [usedDays, setUsedDays] = useState(0);\n  const [loading, setLoading] = useState(false); // Для загрузки лимита\n  const [submitting, setSubmitting] = useState(false); // Для сохранения/отправки\n  const [errors, setErrors] = useState({});\n  const [requestId, setRequestId] = useState(null); // ID сохраненной заявки\n\n  // Загрузка лимита отпуска при изменении года\n  useEffect(() => {\n    const fetchLimit = async () => {\n      try {\n        setLoading(true);\n        const limitData = await getVacationLimit(year); // Используем реальный API вызов\n        setLimit(limitData.totalDays);\n        setUsedDays(limitData.usedDays);\n      } catch (error) {\n        // Обработка ошибки, если лимит не найден (например, для нового пользователя/года)\n        if (error.message.includes(\"лимит отпуска не найден\")) {\n          toast.info(`Лимит на ${year} год еще не установлен. Используется стандартный лимит (${limit} дней).`);\n          // Оставляем дефолтные значения limit и usedDays\n        } else {\n          toast.error(\"Ошибка при загрузке лимита отпуска\"); // Показываем общую ошибку, если это не ошибка \"лимит не найден\"\n        }\n        // toast.error(\"Ошибка при загрузке лимита отпуска\"); // Убираем дублирующийся вызов\n        console.error(\"Ошибка при загрузке лимита:\", error); // Логируем ошибку для отладки\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLimit();\n  }, [year]);\n\n  // Вычисление общего количества дней\n  const totalDaysRequested = periods.reduce((sum, period) => sum + period.daysCount, 0);\n  const remainingDays = limit - usedDays - totalDaysRequested;\n\n  // Функция для подсчета дней между датами\n  const calculateDays = (startDate, endDate) => {\n    if (!startDate || !endDate || startDate > endDate) return 0; // Добавлена проверка startDate > endDate\n    const diffTime = Math.abs(endDate.getTime() - startDate.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n  };\n\n  // Обработка изменения года\n  const handleYearChange = e => {\n    setYear(parseInt(e.target.value));\n    // Сброс периодов и ошибок при смене года\n    setPeriods([{\n      startDate: null,\n      endDate: null,\n      daysCount: 0\n    }]);\n    setErrors({});\n    setRequestId(null);\n    setStatus('draft');\n  };\n\n  // Обработка изменения дат\n  const handleDateChange = (index, field, date) => {\n    const newPeriods = [...periods];\n    newPeriods[index][field] = date;\n\n    // Автоматический расчет дней, если обе даты выбраны и start <= end\n    if (newPeriods[index].startDate && newPeriods[index].endDate && newPeriods[index].startDate <= newPeriods[index].endDate) {\n      newPeriods[index].daysCount = calculateDays(newPeriods[index].startDate, newPeriods[index].endDate);\n    } else {\n      newPeriods[index].daysCount = 0; // Сброс, если даты некорректны\n    }\n    setPeriods(newPeriods);\n    // validateForm(newPeriods); // Валидация будет в useEffect\n  };\n\n  // Добавление нового периода\n  const addPeriod = () => {\n    setPeriods([...periods, {\n      startDate: null,\n      endDate: null,\n      daysCount: 0\n    }]);\n  };\n\n  // Удаление периода\n  const removePeriod = index => {\n    const newPeriods = periods.filter((_, i) => i !== index);\n    setPeriods(newPeriods);\n    // validateForm(newPeriods); // Валидация будет в useEffect\n  };\n\n  // Валидация формы (переработанная логика)\n  // Обернута в useCallback для стабильности\n  const validateForm = useCallback(() => {\n    const newErrors = {};\n    const periodsToValidate = periods; // Используем текущее состояние\n\n    // 1. Проверка базовой корректности дат и наличия периодов\n    if (periodsToValidate.length === 0) {\n      newErrors.noPeriods = 'Необходимо добавить хотя бы один период отпуска.';\n      // Устанавливаем ошибки и выходим, если периодов нет\n      setErrors(newErrors);\n      return false;\n    }\n    const hasInvalidDates = periodsToValidate.some(period => !period.startDate || !period.endDate || period.startDate > period.endDate);\n    if (hasInvalidDates) {\n      newErrors.invalidDates = 'Все даты должны быть заполнены корректно (дата начала <= дата окончания).';\n      // Не выходим сразу, чтобы проверить и другие ошибки, если возможно\n    }\n\n    // 2. Проверка общих дней и правила 14 дней (только если базовые даты корректны)\n    if (!hasInvalidDates) {\n      const totalRequested = periodsToValidate.reduce((sum, period) => sum + period.daysCount, 0);\n      if (totalRequested <= 0) {\n        newErrors.noDays = 'Необходимо запросить хотя бы один день отпуска (проверьте даты).';\n      } else {\n        // totalRequested > 0\n        // Отладка: выводим периоды и рассчитанные дни\n        console.log('Validating 14-day rule. Periods:', JSON.stringify(periodsToValidate.map(p => ({\n          start: p.startDate,\n          end: p.endDate,\n          days: p.daysCount\n        }))));\n\n        // Проверяем правило 14 дней\n        const hasLongPeriod = periodsToValidate.some(period => period.daysCount >= 14);\n        console.log('Has long period (>= 14 days):', hasLongPeriod); // Отладка\n        if (!hasLongPeriod) {\n          newErrors.longPeriod = 'Одна из частей отпуска должна быть не менее 14 календарных дней.';\n        } else {\n          // Если условие выполнено, убедимся, что ошибки нет\n          delete newErrors.longPeriod;\n        }\n        // Проверяем лимит\n        if (totalRequested > limit - usedDays) {\n          newErrors.limit = `Превышен доступный лимит дней отпуска (${limit - usedDays} дн.).`;\n        }\n      }\n    }\n\n    // Log the errors object *before* setting state\n    console.log(\"Errors object before setting state:\", JSON.stringify(newErrors));\n\n    // Используем функциональную форму обновления состояния\n    setErrors(prevErrors => {\n      // Сравниваем старые и новые ошибки для отладки (опционально)\n      // console.log(\"Prev errors:\", JSON.stringify(prevErrors));\n      // console.log(\"New errors:\", JSON.stringify(newErrors));\n      // Возвращаем новый объект ошибок только если они действительно изменились\n      // Это может помочь предотвратить лишние рендеры, зависящие от errors\n      if (JSON.stringify(prevErrors) !== JSON.stringify(newErrors)) {\n        console.log(\"Errors changed, updating state.\");\n        return {\n          ...newErrors\n        };\n      }\n      console.log(\"Errors did not change, skipping state update.\");\n      return prevErrors; // Возвращаем предыдущее состояние, если нет изменений\n    });\n\n    // Log *after* setting state (хотя это может не показать обновленное значение немедленно)\n    // console.log(\"Called setErrors with:\", JSON.stringify(newErrors)); // Можно убрать этот лог\n\n    return Object.keys(newErrors).length === 0;\n    // Добавляем зависимости, от которых зависит логика валидации\n  }, [periods, limit, usedDays]);\n\n  // useEffect для запуска валидации при изменении периодов или самой функции validateForm\n  useEffect(() => {\n    console.log(\"Periods or validateForm changed, running validation effect.\");\n    validateForm();\n    // Теперь validateForm стабильна и ее можно безопасно добавить в зависимости\n  }, [periods, validateForm]);\n\n  // Сохранение заявки\n  const handleSave = async e => {\n    e.preventDefault();\n\n    // Проверяем текущее состояние ошибок вместо повторного вызова validateForm()\n    if (Object.keys(errors).length > 0) {\n      console.log(\"Save blocked by existing errors state:\", JSON.stringify(errors));\n      // Показываем конкретную ошибку, если она есть, или общую\n      const firstErrorKey = Object.keys(errors)[0];\n      toast.warn(errors[firstErrorKey] || 'Пожалуйста, исправьте ошибки в форме');\n      return;\n    }\n\n    // Если ошибок в состоянии нет, продолжаем\n    console.log(\"No errors in state, proceeding with save.\");\n    try {\n      setSubmitting(true);\n      const vacationRequest = {\n        year,\n        periods: periods.map(period => ({\n          // Форматирование дат перед отправкой (пример)\n          startDate: period.startDate.toISOString().split('T')[0],\n          endDate: period.endDate.toISOString().split('T')[0],\n          daysCount: period.daysCount\n        })),\n        statusId: 1 // Черновик\n      };\n\n      // Используем реальный API вызов\n      // TODO: Определить, нужно ли обновлять или создавать новую заявку, если requestId уже есть\n      let response;\n      if (requestId) {\n        // Логика обновления существующего черновика (если API поддерживает)\n        // response = await updateVacationRequest(requestId, vacationRequest); \n        // Пока просто создаем новую, если сохраняем повторно\n        response = await createVacationRequest(vacationRequest);\n        toast.info('Черновик обновлен (создана новая версия).'); // Уточняющее сообщение\n      } else {\n        response = await createVacationRequest(vacationRequest);\n        toast.success('Заявка успешно сохранена как черновик');\n      }\n      setRequestId(response.id); // Сохраняем ID созданной/обновленной заявки\n      setStatus('draft'); // Убедимся, что статус - черновик\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при сохранении заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Отправка заявки руководителю\n  const handleSubmit = async () => {\n    // Более явная проверка перед отправкой\n    if (!requestId) {\n      toast.warn('Сначала необходимо сохранить заявку как черновик.'); // Изменено на warn\n      return;\n    }\n    if (!validateForm()) {\n      // Дополнительная валидация перед отправкой\n      toast.warn('Пожалуйста, исправьте ошибки в форме перед отправкой');\n      return;\n    }\n    try {\n      setSubmitting(true);\n      await submitVacationRequest(requestId); // Используем реальный API вызов\n      toast.success('Заявка успешно отправлена руководителю');\n      setStatus('submitted'); // Меняем статус в UI\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при отправке заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"vacation-form-container\",\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430 \\u043D\\u0430 \", year, \" \\u0433\\u043E\\u0434\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"year-selector\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"year\",\n        children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0434:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"year\",\n        value: year,\n        onChange: handleYearChange,\n        disabled: loading || submitting,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: new Date().getFullYear(),\n          children: \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0433\\u043E\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: new Date().getFullYear() + 1,\n          children: \"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0438\\u0439 \\u0433\\u043E\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"loading-indicator\",\n        children: \" \\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043B\\u0438\\u043C\\u0438\\u0442\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"vacation-limits card\" // Добавлен класс card\n      ,\n      initial: {\n        x: -20,\n        opacity: 0\n      },\n      animate: {\n        x: 0,\n        opacity: 1\n      },\n      transition: {\n        delay: 0.2\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u043E \\u0434\\u043D\\u0435\\u0439:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: limit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0418\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u043D\\u043E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: usedDays\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0417\\u0430\\u043F\\u0440\\u043E\\u0448\\u0435\\u043D\\u043E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: totalDaysRequested\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u041E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `limit-value ${remainingDays < 0 ? 'error' : ''}`,\n          children: remainingDays\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), errors.invalidDates && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.invalidDates\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 31\n    }, this), errors.noPeriods && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.noPeriods\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 28\n    }, this), errors.noDays && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.noDays\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 25\n    }, this), console.log(`Rendering check - errors.longPeriod: ${errors.longPeriod}`), errors.longPeriod && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.longPeriod\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 29\n    }, this), errors.limit && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: errors.limit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSave,\n      children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: periods.map((period, index) => /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"vacation-period card\" // Добавлен класс card\n          ,\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -20\n          },\n          transition: {\n            delay: index * 0.1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"\\u0427\\u0430\\u0441\\u0442\\u044C \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430 \", index + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-inputs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: `start-date-${index}`,\n                children: \"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"date-picker-container\",\n                children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                  id: `start-date-${index}`,\n                  selected: period.startDate,\n                  onChange: date => handleDateChange(index, 'startDate', date),\n                  selectsStart: true,\n                  startDate: period.startDate,\n                  endDate: period.endDate,\n                  minDate: new Date(year, 0, 1),\n                  maxDate: new Date(year, 11, 31),\n                  dateFormat: \"dd.MM.yyyy\",\n                  locale: \"ru\",\n                  placeholderText: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",\n                  className: \"date-input\",\n                  disabled: submitting || status === 'submitted'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                  className: \"date-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: `end-date-${index}`,\n                children: \"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"date-picker-container\",\n                children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                  id: `end-date-${index}`,\n                  selected: period.endDate,\n                  onChange: date => handleDateChange(index, 'endDate', date),\n                  selectsEnd: true,\n                  startDate: period.startDate,\n                  endDate: period.endDate,\n                  minDate: period.startDate || new Date(year, 0, 1),\n                  maxDate: new Date(year, 11, 31),\n                  dateFormat: \"dd.MM.yyyy\",\n                  locale: \"ru\",\n                  placeholderText: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",\n                  className: \"date-input\",\n                  disabled: submitting || status === 'submitted' || !period.startDate // Блокируем, пока не выбрана дата начала\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                  className: \"date-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"days-count\",\n            children: [\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0434\\u043D\\u0435\\u0439: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: period.daysCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this), periods.length > 1 && /*#__PURE__*/_jsxDEV(motion.button, {\n            type: \"button\",\n            className: \"remove-period btn btn-danger\" // Добавлены классы btn\n            ,\n            onClick: () => removePeriod(index),\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            disabled: submitting || status === 'submitted',\n            children: [/*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 19\n            }, this), \" \\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0447\\u0430\\u0441\\u0442\\u044C\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"button\",\n          className: \"add-period btn\" // Добавлен класс btn\n          ,\n          onClick: addPeriod,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || status === 'submitted',\n          children: [/*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this), \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0447\\u0430\\u0441\\u0442\\u044C \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"submit\",\n          className: \"save-request btn btn-primary\" // Добавлены классы btn\n          ,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || status === 'submitted' || Object.keys(errors).length > 0 // Блокируем при ошибках\n          ,\n          children: [/*#__PURE__*/_jsxDEV(FaSave, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this), \" \", requestId ? 'Обновить черновик' : 'Сохранить черновик']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"button\",\n          className: \"submit-request btn btn-success\" // Добавлены классы btn\n          ,\n          onClick: handleSubmit,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || !requestId || status === 'submitted' || Object.keys(errors).length > 0 // Блокируем при ошибках\n          ,\n          children: [/*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this), \" \\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0443\\u043A\\u043E\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), status === 'submitted' && /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"success-message\" // Нужен CSS для этого класса\n      ,\n      initial: {\n        opacity: 0,\n        y: 10\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      children: \"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0430 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0430!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 5\n  }, this);\n};\n_s(VacationForm, \"/+RDQ+RoWHQQQiu59J2ORSQZA/8=\");\n_c = VacationForm;\nexport default VacationForm;\nvar _c;\n$RefreshReg$(_c, \"VacationForm\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","motion","AnimatePresence","DatePicker","registerLocale","toast","FaCalendarAlt","FaPlus","FaTrash","FaSave","FaPaperPlane","ru","getVacationLimit","createVacationRequest","submitVacationRequest","jsxDEV","_jsxDEV","VacationForm","_s","year","setYear","Date","getFullYear","periods","setPeriods","startDate","endDate","daysCount","status","setStatus","limit","setLimit","usedDays","setUsedDays","loading","setLoading","submitting","setSubmitting","errors","setErrors","requestId","setRequestId","fetchLimit","limitData","totalDays","error","message","includes","info","console","totalDaysRequested","reduce","sum","period","remainingDays","calculateDays","diffTime","Math","abs","getTime","ceil","handleYearChange","e","parseInt","target","value","handleDateChange","index","field","date","newPeriods","addPeriod","removePeriod","filter","_","i","validateForm","newErrors","periodsToValidate","length","noPeriods","hasInvalidDates","some","invalidDates","totalRequested","noDays","log","JSON","stringify","map","p","start","end","days","hasLongPeriod","longPeriod","prevErrors","Object","keys","handleSave","preventDefault","firstErrorKey","warn","vacationRequest","toISOString","split","statusId","response","success","id","handleSubmit","div","className","initial","opacity","animate","transition","duration","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","onChange","disabled","x","delay","onSubmit","y","exit","selected","selectsStart","minDate","maxDate","dateFormat","locale","placeholderText","selectsEnd","button","type","onClick","whileHover","scale","whileTap","_c","$RefreshReg$"],"sources":["/Users/usedcvnt/Documents/IDEProjects/VSCProjects/1st/frontend/src/pages/vacations/VacationForm.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'; // Добавлен useCallback\nimport { motion, AnimatePresence } from 'framer-motion';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport { toast } from 'react-toastify';\nimport { FaCalendarAlt, FaPlus, FaTrash, FaSave, FaPaperPlane } from 'react-icons/fa';\nimport ru from 'date-fns/locale/ru';\nimport { getVacationLimit, createVacationRequest, submitVacationRequest } from '../../api/vacations'; // Предполагается, что API файл будет создан\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './VacationForm.css';\n\n// Регистрация русской локали для DatePicker\nregisterLocale('ru', ru);\n\nconst VacationForm = () => {\n  const [year, setYear] = useState(new Date().getFullYear() + 1);\n  const [periods, setPeriods] = useState([{ startDate: null, endDate: null, daysCount: 0 }]);\n  const [status, setStatus] = useState('draft'); // 'draft', 'submitted'\n  const [limit, setLimit] = useState(28);\n  const [usedDays, setUsedDays] = useState(0);\n  const [loading, setLoading] = useState(false); // Для загрузки лимита\n  const [submitting, setSubmitting] = useState(false); // Для сохранения/отправки\n  const [errors, setErrors] = useState({});\n  const [requestId, setRequestId] = useState(null); // ID сохраненной заявки\n\n\n  // Загрузка лимита отпуска при изменении года\n  useEffect(() => {\n    const fetchLimit = async () => {\n      try {\n        setLoading(true);\n        const limitData = await getVacationLimit(year); // Используем реальный API вызов\n        setLimit(limitData.totalDays);\n        setUsedDays(limitData.usedDays);\n      } catch (error) {\n        // Обработка ошибки, если лимит не найден (например, для нового пользователя/года)\n        if (error.message.includes(\"лимит отпуска не найден\")) {\n            toast.info(`Лимит на ${year} год еще не установлен. Используется стандартный лимит (${limit} дней).`);\n            // Оставляем дефолтные значения limit и usedDays\n        } else {\n            toast.error(\"Ошибка при загрузке лимита отпуска\"); // Показываем общую ошибку, если это не ошибка \"лимит не найден\"\n        }\n        // toast.error(\"Ошибка при загрузке лимита отпуска\"); // Убираем дублирующийся вызов\n        console.error(\"Ошибка при загрузке лимита:\", error); // Логируем ошибку для отладки\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchLimit();\n  }, [year]);\n\n  // Вычисление общего количества дней\n  const totalDaysRequested = periods.reduce((sum, period) => sum + period.daysCount, 0);\n  const remainingDays = limit - usedDays - totalDaysRequested;\n\n  // Функция для подсчета дней между датами\n  const calculateDays = (startDate, endDate) => {\n    if (!startDate || !endDate || startDate > endDate) return 0; // Добавлена проверка startDate > endDate\n    const diffTime = Math.abs(endDate.getTime() - startDate.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n  };\n\n  // Обработка изменения года\n  const handleYearChange = (e) => {\n    setYear(parseInt(e.target.value));\n    // Сброс периодов и ошибок при смене года\n    setPeriods([{ startDate: null, endDate: null, daysCount: 0 }]);\n    setErrors({});\n    setRequestId(null);\n    setStatus('draft');\n  };\n\n  // Обработка изменения дат\n  const handleDateChange = (index, field, date) => {\n    const newPeriods = [...periods];\n    newPeriods[index][field] = date;\n    \n    // Автоматический расчет дней, если обе даты выбраны и start <= end\n    if (newPeriods[index].startDate && newPeriods[index].endDate && newPeriods[index].startDate <= newPeriods[index].endDate) {\n      newPeriods[index].daysCount = calculateDays(\n        newPeriods[index].startDate,\n        newPeriods[index].endDate\n      );\n    } else {\n      newPeriods[index].daysCount = 0; // Сброс, если даты некорректны\n    }\n    \n    setPeriods(newPeriods);\n    // validateForm(newPeriods); // Валидация будет в useEffect\n  };\n\n  // Добавление нового периода\n  const addPeriod = () => {\n    setPeriods([...periods, { startDate: null, endDate: null, daysCount: 0 }]);\n  };\n\n  // Удаление периода\n  const removePeriod = (index) => {\n    const newPeriods = periods.filter((_, i) => i !== index);\n    setPeriods(newPeriods);\n    // validateForm(newPeriods); // Валидация будет в useEffect\n  };\n\n  // Валидация формы (переработанная логика)\n  // Обернута в useCallback для стабильности\n  const validateForm = useCallback(() => {\n    const newErrors = {};\n    const periodsToValidate = periods; // Используем текущее состояние\n\n    // 1. Проверка базовой корректности дат и наличия периодов\n    if (periodsToValidate.length === 0) {\n      newErrors.noPeriods = 'Необходимо добавить хотя бы один период отпуска.';\n      // Устанавливаем ошибки и выходим, если периодов нет\n      setErrors(newErrors); \n      return false; \n    }\n\n    const hasInvalidDates = periodsToValidate.some(\n      period => !period.startDate || !period.endDate || period.startDate > period.endDate\n    );\n    if (hasInvalidDates) {\n      newErrors.invalidDates = 'Все даты должны быть заполнены корректно (дата начала <= дата окончания).';\n      // Не выходим сразу, чтобы проверить и другие ошибки, если возможно\n    }\n\n    // 2. Проверка общих дней и правила 14 дней (только если базовые даты корректны)\n    if (!hasInvalidDates) {\n      const totalRequested = periodsToValidate.reduce((sum, period) => sum + period.daysCount, 0);\n      \n      if (totalRequested <= 0) {\n           newErrors.noDays = 'Необходимо запросить хотя бы один день отпуска (проверьте даты).';\n      } else { // totalRequested > 0\n          // Отладка: выводим периоды и рассчитанные дни\n          console.log('Validating 14-day rule. Periods:', JSON.stringify(periodsToValidate.map(p => ({ start: p.startDate, end: p.endDate, days: p.daysCount }))));\n          \n          // Проверяем правило 14 дней\n          const hasLongPeriod = periodsToValidate.some(period => period.daysCount >= 14);\n          console.log('Has long period (>= 14 days):', hasLongPeriod); // Отладка\n          if (!hasLongPeriod) {\n              newErrors.longPeriod = 'Одна из частей отпуска должна быть не менее 14 календарных дней.';\n          } else {\n              // Если условие выполнено, убедимся, что ошибки нет\n              delete newErrors.longPeriod; \n          }\n          // Проверяем лимит\n          if (totalRequested > (limit - usedDays)) {\n              newErrors.limit = `Превышен доступный лимит дней отпуска (${limit - usedDays} дн.).`;\n          }\n      }\n    }\n    \n    // Log the errors object *before* setting state\n    console.log(\"Errors object before setting state:\", JSON.stringify(newErrors));\n    \n    // Используем функциональную форму обновления состояния\n    setErrors(prevErrors => {\n      // Сравниваем старые и новые ошибки для отладки (опционально)\n      // console.log(\"Prev errors:\", JSON.stringify(prevErrors));\n      // console.log(\"New errors:\", JSON.stringify(newErrors));\n      // Возвращаем новый объект ошибок только если они действительно изменились\n      // Это может помочь предотвратить лишние рендеры, зависящие от errors\n      if (JSON.stringify(prevErrors) !== JSON.stringify(newErrors)) {\n        console.log(\"Errors changed, updating state.\");\n        return { ...newErrors };\n      }\n      console.log(\"Errors did not change, skipping state update.\");\n      return prevErrors; // Возвращаем предыдущее состояние, если нет изменений\n    });\n\n    // Log *after* setting state (хотя это может не показать обновленное значение немедленно)\n    // console.log(\"Called setErrors with:\", JSON.stringify(newErrors)); // Можно убрать этот лог\n\n    return Object.keys(newErrors).length === 0;\n    // Добавляем зависимости, от которых зависит логика валидации\n  }, [periods, limit, usedDays]); \n  \n  // useEffect для запуска валидации при изменении периодов или самой функции validateForm\n  useEffect(() => {\n    console.log(\"Periods or validateForm changed, running validation effect.\");\n    validateForm();\n    // Теперь validateForm стабильна и ее можно безопасно добавить в зависимости\n  }, [periods, validateForm]); \n\n  // Сохранение заявки\n  const handleSave = async (e) => {\n    e.preventDefault();\n    \n    // Проверяем текущее состояние ошибок вместо повторного вызова validateForm()\n    if (Object.keys(errors).length > 0) {\n        console.log(\"Save blocked by existing errors state:\", JSON.stringify(errors));\n        // Показываем конкретную ошибку, если она есть, или общую\n        const firstErrorKey = Object.keys(errors)[0];\n        toast.warn(errors[firstErrorKey] || 'Пожалуйста, исправьте ошибки в форме');\n        return;\n    }\n    \n    // Если ошибок в состоянии нет, продолжаем\n    console.log(\"No errors in state, proceeding with save.\");\n    try {\n      setSubmitting(true);\n      \n      const vacationRequest = {\n        year,\n        periods: periods.map(period => ({\n          // Форматирование дат перед отправкой (пример)\n          startDate: period.startDate.toISOString().split('T')[0], \n          endDate: period.endDate.toISOString().split('T')[0],\n          daysCount: period.daysCount\n        })),\n        statusId: 1 // Черновик\n      };\n      \n      // Используем реальный API вызов\n      // TODO: Определить, нужно ли обновлять или создавать новую заявку, если requestId уже есть\n      let response;\n      if (requestId) {\n         // Логика обновления существующего черновика (если API поддерживает)\n         // response = await updateVacationRequest(requestId, vacationRequest); \n         // Пока просто создаем новую, если сохраняем повторно\n         response = await createVacationRequest(vacationRequest); \n         toast.info('Черновик обновлен (создана новая версия).'); // Уточняющее сообщение\n      } else {\n         response = await createVacationRequest(vacationRequest);\n         toast.success('Заявка успешно сохранена как черновик');\n      }\n      \n      setRequestId(response.id); // Сохраняем ID созданной/обновленной заявки\n      setStatus('draft'); // Убедимся, что статус - черновик\n      \n    } catch (error) {\n      toast.error(error.message || 'Ошибка при сохранении заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Отправка заявки руководителю\n  const handleSubmit = async () => {\n    // Более явная проверка перед отправкой\n    if (!requestId) {\n      toast.warn('Сначала необходимо сохранить заявку как черновик.'); // Изменено на warn\n      return;\n    }\n     if (!validateForm()) { // Дополнительная валидация перед отправкой\n        toast.warn('Пожалуйста, исправьте ошибки в форме перед отправкой');\n        return;\n    }\n    \n    try {\n      setSubmitting(true);\n      await submitVacationRequest(requestId); // Используем реальный API вызов\n      toast.success('Заявка успешно отправлена руководителю');\n      setStatus('submitted'); // Меняем статус в UI\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при отправке заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <motion.div\n      className=\"vacation-form-container\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.5 }}\n    >\n      <h2>Оформление отпуска на {year} год</h2>\n      \n      <div className=\"year-selector\">\n        <label htmlFor=\"year\">Выберите год:</label>\n        <select id=\"year\" value={year} onChange={handleYearChange} disabled={loading || submitting}>\n          <option value={new Date().getFullYear()}>Текущий год</option>\n          <option value={new Date().getFullYear() + 1}>Следующий год</option>\n        </select>\n        {loading && <span className=\"loading-indicator\"> Загрузка лимита...</span>}\n      </div>\n      \n      <motion.div \n        className=\"vacation-limits card\" // Добавлен класс card\n        initial={{ x: -20, opacity: 0 }}\n        animate={{ x: 0, opacity: 1 }}\n        transition={{ delay: 0.2 }}\n      >\n        <div className=\"limit-item\">\n          <span>Доступно дней:</span>\n          <span className=\"limit-value\">{limit}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Использовано:</span>\n          <span className=\"limit-value\">{usedDays}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Запрошено:</span>\n          <span className=\"limit-value\">{totalDaysRequested}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Осталось:</span>\n          <span className={`limit-value ${remainingDays < 0 ? 'error' : ''}`}>\n            {remainingDays}\n          </span>\n        </div>\n      </motion.div>\n      \n      {/* Отображение ошибок (изменено на явные проверки) */}\n      {errors.invalidDates && <div className=\"error-message\">{errors.invalidDates}</div>}\n      {errors.noPeriods && <div className=\"error-message\">{errors.noPeriods}</div>}\n      {errors.noDays && <div className=\"error-message\">{errors.noDays}</div>}\n      {/* --- DEBUGGING RENDER --- */}\n      {console.log(`Rendering check - errors.longPeriod: ${errors.longPeriod}`)} \n      {errors.longPeriod && <div className=\"error-message\">{errors.longPeriod}</div>}\n      {errors.limit && <div className=\"error-message\">{errors.limit}</div>}\n      \n      <form onSubmit={handleSave}>\n        <AnimatePresence>\n          {periods.map((period, index) => (\n            <motion.div \n              key={index}\n              className=\"vacation-period card\" // Добавлен класс card\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <h3>Часть отпуска {index + 1}</h3>\n              \n              <div className=\"date-inputs\">\n                <div className=\"date-field\">\n                  <label htmlFor={`start-date-${index}`}>Дата начала</label>\n                  <div className=\"date-picker-container\">\n                    <DatePicker\n                      id={`start-date-${index}`}\n                      selected={period.startDate}\n                      onChange={(date) => handleDateChange(index, 'startDate', date)}\n                      selectsStart\n                      startDate={period.startDate}\n                      endDate={period.endDate}\n                      minDate={new Date(year, 0, 1)}\n                      maxDate={new Date(year, 11, 31)}\n                      dateFormat=\"dd.MM.yyyy\"\n                      locale=\"ru\"\n                      placeholderText=\"Выберите дату\"\n                      className=\"date-input\"\n                      disabled={submitting || status === 'submitted'}\n                    />\n                    <FaCalendarAlt className=\"date-icon\" />\n                  </div>\n                </div>\n                \n                <div className=\"date-field\">\n                  <label htmlFor={`end-date-${index}`}>Дата окончания</label>\n                  <div className=\"date-picker-container\">\n                    <DatePicker\n                      id={`end-date-${index}`}\n                      selected={period.endDate}\n                      onChange={(date) => handleDateChange(index, 'endDate', date)}\n                      selectsEnd\n                      startDate={period.startDate}\n                      endDate={period.endDate}\n                      minDate={period.startDate || new Date(year, 0, 1)}\n                      maxDate={new Date(year, 11, 31)}\n                      dateFormat=\"dd.MM.yyyy\"\n                      locale=\"ru\"\n                      placeholderText=\"Выберите дату\"\n                      className=\"date-input\"\n                      disabled={submitting || status === 'submitted' || !period.startDate} // Блокируем, пока не выбрана дата начала\n                    />\n                    <FaCalendarAlt className=\"date-icon\" />\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"days-count\">\n                Количество дней: <strong>{period.daysCount}</strong>\n              </div>\n              \n              {periods.length > 1 && (\n                <motion.button\n                  type=\"button\"\n                  className=\"remove-period btn btn-danger\" // Добавлены классы btn\n                  onClick={() => removePeriod(index)}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  disabled={submitting || status === 'submitted'}\n                >\n                  <FaTrash /> Удалить часть\n                </motion.button>\n              )}\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        <div className=\"form-actions\">\n          <motion.button\n            type=\"button\"\n            className=\"add-period btn\" // Добавлен класс btn\n            onClick={addPeriod}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={submitting || status === 'submitted'}\n          >\n            <FaPlus /> Добавить часть отпуска\n          </motion.button>\n          \n          <motion.button\n            type=\"submit\"\n            className=\"save-request btn btn-primary\" // Добавлены классы btn\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={submitting || status === 'submitted' || Object.keys(errors).length > 0} // Блокируем при ошибках\n          >\n            <FaSave /> {requestId ? 'Обновить черновик' : 'Сохранить черновик'}\n          </motion.button>\n          \n          <motion.button\n            type=\"button\"\n            className=\"submit-request btn btn-success\" // Добавлены классы btn\n            onClick={handleSubmit}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={submitting || !requestId || status === 'submitted' || Object.keys(errors).length > 0} // Блокируем при ошибках\n          >\n            <FaPaperPlane /> Отправить руководителю\n          </motion.button>\n        </div>\n      </form>\n      \n      {status === 'submitted' && (\n          <motion.div \n            className=\"success-message\" // Нужен CSS для этого класса\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n          >\n            Заявка успешно отправлена!\n          </motion.div>\n      )}\n    </motion.div>\n  );\n};\n\nexport default VacationForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}