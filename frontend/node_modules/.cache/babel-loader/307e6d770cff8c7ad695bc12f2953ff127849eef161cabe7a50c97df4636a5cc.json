{"ast":null,"code":"var _jsxFileName = \"/Users/usedcvnt/Documents/IDEProjects/VSCProjects/1st/frontend/src/pages/vacations/VacationForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport { toast } from 'react-toastify';\nimport { FaCalendarAlt, FaPlus, FaTrash, FaSave, FaPaperPlane } from 'react-icons/fa';\nimport ru from 'date-fns/locale/ru';\nimport { getVacationLimit, createVacationRequest, submitVacationRequest } from '../../api/vacations'; // Предполагается, что API файл будет создан\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './VacationForm.css';\n\n// Регистрация русской локали для DatePicker\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nregisterLocale('ru', ru);\nconst VacationForm = () => {\n  _s();\n  const [year, setYear] = useState(new Date().getFullYear() + 1);\n  const [periods, setPeriods] = useState([{\n    startDate: null,\n    endDate: null,\n    daysCount: 0\n  }]);\n  const [status, setStatus] = useState('draft'); // 'draft', 'submitted'\n  const [limit, setLimit] = useState(28);\n  const [usedDays, setUsedDays] = useState(0);\n  const [loading, setLoading] = useState(false); // Для загрузки лимита\n  const [submitting, setSubmitting] = useState(false); // Для сохранения/отправки\n  const [errors, setErrors] = useState({});\n  const [requestId, setRequestId] = useState(null); // ID сохраненной заявки\n\n  // Загрузка лимита отпуска при изменении года\n  useEffect(() => {\n    const fetchLimit = async () => {\n      try {\n        setLoading(true);\n        const limitData = await getVacationLimit(year); // Используем реальный API вызов\n        setLimit(limitData.totalDays);\n        setUsedDays(limitData.usedDays);\n      } catch (error) {\n        // Обработка ошибки, если лимит не найден (например, для нового пользователя/года)\n        if (error.message.includes(\"лимит отпуска не найден\")) {\n          toast.info(`Лимит на ${year} год еще не установлен. Используется стандартный лимит (${limit} дней).`);\n          // Оставляем дефолтные значения limit и usedDays\n        } else {\n          toast.error(\"Ошибка при загрузке лимита отпуска\"); // Показываем общую ошибку, если это не ошибка \"лимит не найден\"\n        }\n        // toast.error(\"Ошибка при загрузке лимита отпуска\"); // Убираем дублирующийся вызов\n        console.error(\"Ошибка при загрузке лимита:\", error); // Логируем ошибку для отладки\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLimit();\n  }, [year]);\n\n  // Вычисление общего количества дней\n  const totalDaysRequested = periods.reduce((sum, period) => sum + period.daysCount, 0);\n  const remainingDays = limit - usedDays - totalDaysRequested;\n\n  // Функция для подсчета дней между датами\n  const calculateDays = (startDate, endDate) => {\n    if (!startDate || !endDate || startDate > endDate) return 0; // Добавлена проверка startDate > endDate\n    const diffTime = Math.abs(endDate.getTime() - startDate.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n  };\n\n  // Обработка изменения года\n  const handleYearChange = e => {\n    setYear(parseInt(e.target.value));\n    // Сброс периодов и ошибок при смене года\n    setPeriods([{\n      startDate: null,\n      endDate: null,\n      daysCount: 0\n    }]);\n    setErrors({});\n    setRequestId(null);\n    setStatus('draft');\n  };\n\n  // Обработка изменения дат\n  const handleDateChange = (index, field, date) => {\n    const newPeriods = [...periods];\n    newPeriods[index][field] = date;\n\n    // Автоматический расчет дней, если обе даты выбраны и start <= end\n    if (newPeriods[index].startDate && newPeriods[index].endDate && newPeriods[index].startDate <= newPeriods[index].endDate) {\n      newPeriods[index].daysCount = calculateDays(newPeriods[index].startDate, newPeriods[index].endDate);\n    } else {\n      newPeriods[index].daysCount = 0; // Сброс, если даты некорректны\n    }\n    setPeriods(newPeriods);\n    validateForm(newPeriods); // Валидация при каждом изменении\n  };\n\n  // Добавление нового периода\n  const addPeriod = () => {\n    setPeriods([...periods, {\n      startDate: null,\n      endDate: null,\n      daysCount: 0\n    }]);\n  };\n\n  // Удаление периода\n  const removePeriod = index => {\n    const newPeriods = periods.filter((_, i) => i !== index);\n    setPeriods(newPeriods);\n    validateForm(newPeriods); // Валидация после удаления\n  };\n\n  // Валидация формы (переработанная логика)\n  const validateForm = (periodsToValidate = periods) => {\n    const newErrors = {};\n\n    // 1. Проверка базовой корректности дат и наличия периодов\n    if (periodsToValidate.length === 0) {\n      newErrors.noPeriods = 'Необходимо добавить хотя бы один период отпуска.';\n      setErrors(newErrors);\n      return false; // Дальше не проверяем\n    }\n    const hasInvalidDates = periodsToValidate.some(period => !period.startDate || !period.endDate || period.startDate > period.endDate);\n    if (hasInvalidDates) {\n      newErrors.invalidDates = 'Все даты должны быть заполнены корректно (дата начала <= дата окончания).';\n      // Не выходим сразу, чтобы проверить и другие ошибки, если возможно\n    }\n\n    // 2. Проверка общих дней и правила 14 дней (только если базовые даты корректны)\n    if (!hasInvalidDates) {\n      const totalRequested = periodsToValidate.reduce((sum, period) => sum + period.daysCount, 0);\n      if (totalRequested <= 0) {\n        newErrors.noDays = 'Необходимо запросить хотя бы один день отпуска (проверьте даты).';\n      } else {\n        // totalRequested > 0\n        // Отладка: выводим периоды и рассчитанные дни\n        console.log('Validating 14-day rule. Periods:', JSON.stringify(periodsToValidate.map(p => ({\n          start: p.startDate,\n          end: p.endDate,\n          days: p.daysCount\n        }))));\n\n        // Проверяем правило 14 дней\n        const hasLongPeriod = periodsToValidate.some(period => period.daysCount >= 14);\n        console.log('Has long period (>= 14 days):', hasLongPeriod); // Отладка\n        if (!hasLongPeriod) {\n          newErrors.longPeriod = 'Одна из частей отпуска должна быть не менее 14 календарных дней.';\n        }\n        // Проверяем лимит\n        if (totalRequested > limit - usedDays) {\n          newErrors.limit = `Превышен доступный лимит дней отпуска (${limit - usedDays} дн.).`;\n        }\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Сохранение заявки\n  const handleSave = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      toast.warn('Пожалуйста, исправьте ошибки в форме');\n      return;\n    }\n    try {\n      setSubmitting(true);\n      const vacationRequest = {\n        year,\n        periods: periods.map(period => ({\n          // Форматирование дат перед отправкой (пример)\n          startDate: period.startDate.toISOString().split('T')[0],\n          endDate: period.endDate.toISOString().split('T')[0],\n          daysCount: period.daysCount\n        })),\n        statusId: 1 // Черновик\n      };\n\n      // Используем реальный API вызов\n      // TODO: Определить, нужно ли обновлять или создавать новую заявку, если requestId уже есть\n      let response;\n      if (requestId) {\n        // Логика обновления существующего черновика (если API поддерживает)\n        // response = await updateVacationRequest(requestId, vacationRequest); \n        // Пока просто создаем новую, если сохраняем повторно\n        response = await createVacationRequest(vacationRequest);\n        toast.info('Черновик обновлен (создана новая версия).'); // Уточняющее сообщение\n      } else {\n        response = await createVacationRequest(vacationRequest);\n        toast.success('Заявка успешно сохранена как черновик');\n      }\n      setRequestId(response.id); // Сохраняем ID созданной/обновленной заявки\n      setStatus('draft'); // Убедимся, что статус - черновик\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при сохранении заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Отправка заявки руководителю\n  const handleSubmit = async () => {\n    // Более явная проверка перед отправкой\n    if (!requestId) {\n      toast.warn('Сначала необходимо сохранить заявку как черновик.'); // Изменено на warn\n      return;\n    }\n    if (!validateForm()) {\n      // Дополнительная валидация перед отправкой\n      toast.warn('Пожалуйста, исправьте ошибки в форме перед отправкой');\n      return;\n    }\n    try {\n      setSubmitting(true);\n      await submitVacationRequest(requestId); // Используем реальный API вызов\n      toast.success('Заявка успешно отправлена руководителю');\n      setStatus('submitted'); // Меняем статус в UI\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при отправке заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"vacation-form-container\",\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430 \\u043D\\u0430 \", year, \" \\u0433\\u043E\\u0434\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"year-selector\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"year\",\n        children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0434:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"year\",\n        value: year,\n        onChange: handleYearChange,\n        disabled: loading || submitting,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: new Date().getFullYear(),\n          children: \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0433\\u043E\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: new Date().getFullYear() + 1,\n          children: \"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0438\\u0439 \\u0433\\u043E\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"loading-indicator\",\n        children: \" \\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043B\\u0438\\u043C\\u0438\\u0442\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"vacation-limits card\" // Добавлен класс card\n      ,\n      initial: {\n        x: -20,\n        opacity: 0\n      },\n      animate: {\n        x: 0,\n        opacity: 1\n      },\n      transition: {\n        delay: 0.2\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u043E \\u0434\\u043D\\u0435\\u0439:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: limit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0418\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u043D\\u043E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: usedDays\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0417\\u0430\\u043F\\u0440\\u043E\\u0448\\u0435\\u043D\\u043E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"limit-value\",\n          children: totalDaysRequested\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"limit-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u041E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `limit-value ${remainingDays < 0 ? 'error' : ''}`,\n          children: remainingDays\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), Object.values(errors).map((error, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSave,\n      children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: periods.map((period, index) => /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"vacation-period card\" // Добавлен класс card\n          ,\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -20\n          },\n          transition: {\n            delay: index * 0.1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"\\u0427\\u0430\\u0441\\u0442\\u044C \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430 \", index + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-inputs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: `start-date-${index}`,\n                children: \"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"date-picker-container\",\n                children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                  id: `start-date-${index}`,\n                  selected: period.startDate,\n                  onChange: date => handleDateChange(index, 'startDate', date),\n                  selectsStart: true,\n                  startDate: period.startDate,\n                  endDate: period.endDate,\n                  minDate: new Date(year, 0, 1),\n                  maxDate: new Date(year, 11, 31),\n                  dateFormat: \"dd.MM.yyyy\",\n                  locale: \"ru\",\n                  placeholderText: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",\n                  className: \"date-input\",\n                  disabled: submitting || status === 'submitted'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                  className: \"date-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: `end-date-${index}`,\n                children: \"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"date-picker-container\",\n                children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                  id: `end-date-${index}`,\n                  selected: period.endDate,\n                  onChange: date => handleDateChange(index, 'endDate', date),\n                  selectsEnd: true,\n                  startDate: period.startDate,\n                  endDate: period.endDate,\n                  minDate: period.startDate || new Date(year, 0, 1),\n                  maxDate: new Date(year, 11, 31),\n                  dateFormat: \"dd.MM.yyyy\",\n                  locale: \"ru\",\n                  placeholderText: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",\n                  className: \"date-input\",\n                  disabled: submitting || status === 'submitted' || !period.startDate // Блокируем, пока не выбрана дата начала\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                  className: \"date-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"days-count\",\n            children: [\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0434\\u043D\\u0435\\u0439: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: period.daysCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this), periods.length > 1 && /*#__PURE__*/_jsxDEV(motion.button, {\n            type: \"button\",\n            className: \"remove-period btn btn-danger\" // Добавлены классы btn\n            ,\n            onClick: () => removePeriod(index),\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            disabled: submitting || status === 'submitted',\n            children: [/*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 19\n            }, this), \" \\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0447\\u0430\\u0441\\u0442\\u044C\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"button\",\n          className: \"add-period btn\" // Добавлен класс btn\n          ,\n          onClick: addPeriod,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || status === 'submitted',\n          children: [/*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0447\\u0430\\u0441\\u0442\\u044C \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0430\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"submit\",\n          className: \"save-request btn btn-primary\" // Добавлены классы btn\n          ,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || status === 'submitted' || Object.keys(errors).length > 0 // Блокируем при ошибках\n          ,\n          children: [/*#__PURE__*/_jsxDEV(FaSave, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), \" \", requestId ? 'Обновить черновик' : 'Сохранить черновик']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"button\",\n          className: \"submit-request btn btn-success\" // Добавлены классы btn\n          ,\n          onClick: handleSubmit,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          disabled: submitting || !requestId || status === 'submitted' || Object.keys(errors).length > 0 // Блокируем при ошибках\n          ,\n          children: [/*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), \" \\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0443\\u043A\\u043E\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), status === 'submitted' && /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"success-message\" // Нужен CSS для этого класса\n      ,\n      initial: {\n        opacity: 0,\n        y: 10\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      children: \"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0430 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0430!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 5\n  }, this);\n};\n_s(VacationForm, \"Wq7iAUzeIFGQCPxjxacLuz0NKso=\");\n_c = VacationForm;\nexport default VacationForm;\nvar _c;\n$RefreshReg$(_c, \"VacationForm\");","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","DatePicker","registerLocale","toast","FaCalendarAlt","FaPlus","FaTrash","FaSave","FaPaperPlane","ru","getVacationLimit","createVacationRequest","submitVacationRequest","jsxDEV","_jsxDEV","VacationForm","_s","year","setYear","Date","getFullYear","periods","setPeriods","startDate","endDate","daysCount","status","setStatus","limit","setLimit","usedDays","setUsedDays","loading","setLoading","submitting","setSubmitting","errors","setErrors","requestId","setRequestId","fetchLimit","limitData","totalDays","error","message","includes","info","console","totalDaysRequested","reduce","sum","period","remainingDays","calculateDays","diffTime","Math","abs","getTime","ceil","handleYearChange","e","parseInt","target","value","handleDateChange","index","field","date","newPeriods","validateForm","addPeriod","removePeriod","filter","_","i","periodsToValidate","newErrors","length","noPeriods","hasInvalidDates","some","invalidDates","totalRequested","noDays","log","JSON","stringify","map","p","start","end","days","hasLongPeriod","longPeriod","Object","keys","handleSave","preventDefault","warn","vacationRequest","toISOString","split","statusId","response","success","id","handleSubmit","div","className","initial","opacity","animate","transition","duration","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","onChange","disabled","x","delay","values","onSubmit","y","exit","selected","selectsStart","minDate","maxDate","dateFormat","locale","placeholderText","selectsEnd","button","type","onClick","whileHover","scale","whileTap","_c","$RefreshReg$"],"sources":["/Users/usedcvnt/Documents/IDEProjects/VSCProjects/1st/frontend/src/pages/vacations/VacationForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport { toast } from 'react-toastify';\nimport { FaCalendarAlt, FaPlus, FaTrash, FaSave, FaPaperPlane } from 'react-icons/fa';\nimport ru from 'date-fns/locale/ru';\nimport { getVacationLimit, createVacationRequest, submitVacationRequest } from '../../api/vacations'; // Предполагается, что API файл будет создан\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './VacationForm.css';\n\n// Регистрация русской локали для DatePicker\nregisterLocale('ru', ru);\n\nconst VacationForm = () => {\n  const [year, setYear] = useState(new Date().getFullYear() + 1);\n  const [periods, setPeriods] = useState([{ startDate: null, endDate: null, daysCount: 0 }]);\n  const [status, setStatus] = useState('draft'); // 'draft', 'submitted'\n  const [limit, setLimit] = useState(28);\n  const [usedDays, setUsedDays] = useState(0);\n  const [loading, setLoading] = useState(false); // Для загрузки лимита\n  const [submitting, setSubmitting] = useState(false); // Для сохранения/отправки\n  const [errors, setErrors] = useState({});\n  const [requestId, setRequestId] = useState(null); // ID сохраненной заявки\n\n\n  // Загрузка лимита отпуска при изменении года\n  useEffect(() => {\n    const fetchLimit = async () => {\n      try {\n        setLoading(true);\n        const limitData = await getVacationLimit(year); // Используем реальный API вызов\n        setLimit(limitData.totalDays);\n        setUsedDays(limitData.usedDays);\n      } catch (error) {\n        // Обработка ошибки, если лимит не найден (например, для нового пользователя/года)\n        if (error.message.includes(\"лимит отпуска не найден\")) {\n            toast.info(`Лимит на ${year} год еще не установлен. Используется стандартный лимит (${limit} дней).`);\n            // Оставляем дефолтные значения limit и usedDays\n        } else {\n            toast.error(\"Ошибка при загрузке лимита отпуска\"); // Показываем общую ошибку, если это не ошибка \"лимит не найден\"\n        }\n        // toast.error(\"Ошибка при загрузке лимита отпуска\"); // Убираем дублирующийся вызов\n        console.error(\"Ошибка при загрузке лимита:\", error); // Логируем ошибку для отладки\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchLimit();\n  }, [year]);\n\n  // Вычисление общего количества дней\n  const totalDaysRequested = periods.reduce((sum, period) => sum + period.daysCount, 0);\n  const remainingDays = limit - usedDays - totalDaysRequested;\n\n  // Функция для подсчета дней между датами\n  const calculateDays = (startDate, endDate) => {\n    if (!startDate || !endDate || startDate > endDate) return 0; // Добавлена проверка startDate > endDate\n    const diffTime = Math.abs(endDate.getTime() - startDate.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n  };\n\n  // Обработка изменения года\n  const handleYearChange = (e) => {\n    setYear(parseInt(e.target.value));\n    // Сброс периодов и ошибок при смене года\n    setPeriods([{ startDate: null, endDate: null, daysCount: 0 }]);\n    setErrors({});\n    setRequestId(null);\n    setStatus('draft');\n  };\n\n  // Обработка изменения дат\n  const handleDateChange = (index, field, date) => {\n    const newPeriods = [...periods];\n    newPeriods[index][field] = date;\n    \n    // Автоматический расчет дней, если обе даты выбраны и start <= end\n    if (newPeriods[index].startDate && newPeriods[index].endDate && newPeriods[index].startDate <= newPeriods[index].endDate) {\n      newPeriods[index].daysCount = calculateDays(\n        newPeriods[index].startDate,\n        newPeriods[index].endDate\n      );\n    } else {\n      newPeriods[index].daysCount = 0; // Сброс, если даты некорректны\n    }\n    \n    setPeriods(newPeriods);\n    validateForm(newPeriods); // Валидация при каждом изменении\n  };\n\n  // Добавление нового периода\n  const addPeriod = () => {\n    setPeriods([...periods, { startDate: null, endDate: null, daysCount: 0 }]);\n  };\n\n  // Удаление периода\n  const removePeriod = (index) => {\n    const newPeriods = periods.filter((_, i) => i !== index);\n    setPeriods(newPeriods);\n    validateForm(newPeriods); // Валидация после удаления\n  };\n\n  // Валидация формы (переработанная логика)\n  const validateForm = (periodsToValidate = periods) => {\n    const newErrors = {};\n\n    // 1. Проверка базовой корректности дат и наличия периодов\n    if (periodsToValidate.length === 0) {\n      newErrors.noPeriods = 'Необходимо добавить хотя бы один период отпуска.';\n      setErrors(newErrors);\n      return false; // Дальше не проверяем\n    }\n\n    const hasInvalidDates = periodsToValidate.some(\n      period => !period.startDate || !period.endDate || period.startDate > period.endDate\n    );\n    if (hasInvalidDates) {\n      newErrors.invalidDates = 'Все даты должны быть заполнены корректно (дата начала <= дата окончания).';\n      // Не выходим сразу, чтобы проверить и другие ошибки, если возможно\n    }\n\n    // 2. Проверка общих дней и правила 14 дней (только если базовые даты корректны)\n    if (!hasInvalidDates) {\n      const totalRequested = periodsToValidate.reduce((sum, period) => sum + period.daysCount, 0);\n      \n      if (totalRequested <= 0) {\n           newErrors.noDays = 'Необходимо запросить хотя бы один день отпуска (проверьте даты).';\n      } else { // totalRequested > 0\n          // Отладка: выводим периоды и рассчитанные дни\n          console.log('Validating 14-day rule. Periods:', JSON.stringify(periodsToValidate.map(p => ({ start: p.startDate, end: p.endDate, days: p.daysCount }))));\n          \n          // Проверяем правило 14 дней\n          const hasLongPeriod = periodsToValidate.some(period => period.daysCount >= 14);\n          console.log('Has long period (>= 14 days):', hasLongPeriod); // Отладка\n          if (!hasLongPeriod) {\n              newErrors.longPeriod = 'Одна из частей отпуска должна быть не менее 14 календарных дней.';\n          }\n          // Проверяем лимит\n          if (totalRequested > (limit - usedDays)) {\n              newErrors.limit = `Превышен доступный лимит дней отпуска (${limit - usedDays} дн.).`;\n          }\n      }\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Сохранение заявки\n  const handleSave = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n        toast.warn('Пожалуйста, исправьте ошибки в форме');\n        return;\n    }\n    \n    try {\n      setSubmitting(true);\n      \n      const vacationRequest = {\n        year,\n        periods: periods.map(period => ({\n          // Форматирование дат перед отправкой (пример)\n          startDate: period.startDate.toISOString().split('T')[0], \n          endDate: period.endDate.toISOString().split('T')[0],\n          daysCount: period.daysCount\n        })),\n        statusId: 1 // Черновик\n      };\n      \n      // Используем реальный API вызов\n      // TODO: Определить, нужно ли обновлять или создавать новую заявку, если requestId уже есть\n      let response;\n      if (requestId) {\n         // Логика обновления существующего черновика (если API поддерживает)\n         // response = await updateVacationRequest(requestId, vacationRequest); \n         // Пока просто создаем новую, если сохраняем повторно\n         response = await createVacationRequest(vacationRequest); \n         toast.info('Черновик обновлен (создана новая версия).'); // Уточняющее сообщение\n      } else {\n         response = await createVacationRequest(vacationRequest);\n         toast.success('Заявка успешно сохранена как черновик');\n      }\n      \n      setRequestId(response.id); // Сохраняем ID созданной/обновленной заявки\n      setStatus('draft'); // Убедимся, что статус - черновик\n      \n    } catch (error) {\n      toast.error(error.message || 'Ошибка при сохранении заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Отправка заявки руководителю\n  const handleSubmit = async () => {\n    // Более явная проверка перед отправкой\n    if (!requestId) {\n      toast.warn('Сначала необходимо сохранить заявку как черновик.'); // Изменено на warn\n      return;\n    }\n     if (!validateForm()) { // Дополнительная валидация перед отправкой\n        toast.warn('Пожалуйста, исправьте ошибки в форме перед отправкой');\n        return;\n    }\n    \n    try {\n      setSubmitting(true);\n      await submitVacationRequest(requestId); // Используем реальный API вызов\n      toast.success('Заявка успешно отправлена руководителю');\n      setStatus('submitted'); // Меняем статус в UI\n    } catch (error) {\n      toast.error(error.message || 'Ошибка при отправке заявки');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <motion.div\n      className=\"vacation-form-container\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.5 }}\n    >\n      <h2>Оформление отпуска на {year} год</h2>\n      \n      <div className=\"year-selector\">\n        <label htmlFor=\"year\">Выберите год:</label>\n        <select id=\"year\" value={year} onChange={handleYearChange} disabled={loading || submitting}>\n          <option value={new Date().getFullYear()}>Текущий год</option>\n          <option value={new Date().getFullYear() + 1}>Следующий год</option>\n        </select>\n        {loading && <span className=\"loading-indicator\"> Загрузка лимита...</span>}\n      </div>\n      \n      <motion.div \n        className=\"vacation-limits card\" // Добавлен класс card\n        initial={{ x: -20, opacity: 0 }}\n        animate={{ x: 0, opacity: 1 }}\n        transition={{ delay: 0.2 }}\n      >\n        <div className=\"limit-item\">\n          <span>Доступно дней:</span>\n          <span className=\"limit-value\">{limit}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Использовано:</span>\n          <span className=\"limit-value\">{usedDays}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Запрошено:</span>\n          <span className=\"limit-value\">{totalDaysRequested}</span>\n        </div>\n        <div className=\"limit-item\">\n          <span>Осталось:</span>\n          <span className={`limit-value ${remainingDays < 0 ? 'error' : ''}`}>\n            {remainingDays}\n          </span>\n        </div>\n      </motion.div>\n      \n      {/* Отображение ошибок */}\n      {Object.values(errors).map((error, index) => (\n          <div key={index} className=\"error-message\">{error}</div>\n      ))}\n      \n      <form onSubmit={handleSave}>\n        <AnimatePresence>\n          {periods.map((period, index) => (\n            <motion.div \n              key={index}\n              className=\"vacation-period card\" // Добавлен класс card\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <h3>Часть отпуска {index + 1}</h3>\n              \n              <div className=\"date-inputs\">\n                <div className=\"date-field\">\n                  <label htmlFor={`start-date-${index}`}>Дата начала</label>\n                  <div className=\"date-picker-container\">\n                    <DatePicker\n                      id={`start-date-${index}`}\n                      selected={period.startDate}\n                      onChange={(date) => handleDateChange(index, 'startDate', date)}\n                      selectsStart\n                      startDate={period.startDate}\n                      endDate={period.endDate}\n                      minDate={new Date(year, 0, 1)}\n                      maxDate={new Date(year, 11, 31)}\n                      dateFormat=\"dd.MM.yyyy\"\n                      locale=\"ru\"\n                      placeholderText=\"Выберите дату\"\n                      className=\"date-input\"\n                      disabled={submitting || status === 'submitted'}\n                    />\n                    <FaCalendarAlt className=\"date-icon\" />\n                  </div>\n                </div>\n                \n                <div className=\"date-field\">\n                  <label htmlFor={`end-date-${index}`}>Дата окончания</label>\n                  <div className=\"date-picker-container\">\n                    <DatePicker\n                      id={`end-date-${index}`}\n                      selected={period.endDate}\n                      onChange={(date) => handleDateChange(index, 'endDate', date)}\n                      selectsEnd\n                      startDate={period.startDate}\n                      endDate={period.endDate}\n                      minDate={period.startDate || new Date(year, 0, 1)}\n                      maxDate={new Date(year, 11, 31)}\n                      dateFormat=\"dd.MM.yyyy\"\n                      locale=\"ru\"\n                      placeholderText=\"Выберите дату\"\n                      className=\"date-input\"\n                      disabled={submitting || status === 'submitted' || !period.startDate} // Блокируем, пока не выбрана дата начала\n                    />\n                    <FaCalendarAlt className=\"date-icon\" />\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"days-count\">\n                Количество дней: <strong>{period.daysCount}</strong>\n              </div>\n              \n              {periods.length > 1 && (\n                <motion.button\n                  type=\"button\"\n                  className=\"remove-period btn btn-danger\" // Добавлены классы btn\n                  onClick={() => removePeriod(index)}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  disabled={submitting || status === 'submitted'}\n                >\n                  <FaTrash /> Удалить часть\n                </motion.button>\n              )}\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        <div className=\"form-actions\">\n          <motion.button\n            type=\"button\"\n            className=\"add-period btn\" // Добавлен класс btn\n            onClick={addPeriod}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={submitting || status === 'submitted'}\n          >\n            <FaPlus /> Добавить часть отпуска\n          </motion.button>\n          \n          <motion.button\n            type=\"submit\"\n            className=\"save-request btn btn-primary\" // Добавлены классы btn\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={submitting || status === 'submitted' || Object.keys(errors).length > 0} // Блокируем при ошибках\n          >\n            <FaSave /> {requestId ? 'Обновить черновик' : 'Сохранить черновик'}\n          </motion.button>\n          \n          <motion.button\n            type=\"button\"\n            className=\"submit-request btn btn-success\" // Добавлены классы btn\n            onClick={handleSubmit}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            disabled={submitting || !requestId || status === 'submitted' || Object.keys(errors).length > 0} // Блокируем при ошибках\n          >\n            <FaPaperPlane /> Отправить руководителю\n          </motion.button>\n        </div>\n      </form>\n      \n      {status === 'submitted' && (\n          <motion.div \n            className=\"success-message\" // Нужен CSS для этого класса\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n          >\n            Заявка успешно отправлена!\n          </motion.div>\n      )}\n    </motion.div>\n  );\n};\n\nexport default VacationForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}